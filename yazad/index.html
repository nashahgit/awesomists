<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
    <script type="text/javascript" src="jquery-3.1.0.min.js"></script>
    <title>CarTrawler - AJAX Booking Engine</title>
    <style type="text/css">
      @import url('https://fonts.googleapis.com/css?family=Alfa+Slab+One');
      body {
        color: #000000;
        overflow-x: hidden;
        background-color: #0971b6; /* rgb(11, 98, 81); */
      }
      .fix-it {

      }
      .appBar {
        /*height: 60px;*/
        /*position: fixed;*/
        /*background-color: #1A237E;*/
        padding: 15px;

      }
      .appBar img{
        /*font-family: 'Alfa Slab One', cursive;
        font-size: 45px;
        color: white;
        font-weight: 600;*/
        width: 65%;
        height: auto;
        margin: 0 auto;
        /*text-align: center;
        line-height: .5;*/
      }
      .navbar {
        position: relative;
        top: 20px;
        height: 75px;
        width: 100%;
        border-bottom: 1px solid rgba(0, 0, 0, 0);
        z-index: 9;
        background-color: #0971b6;
      }
      /*#abe_ABE {
        margin-top: 65px;
        color: #ffffff;
      }*/
      #loader {
        position: fixed;
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        z-index: 9999;
        background: url(poi.svg) center no-repeat #fff;
        background-size: 20% auto;
        background-color: #0971b6;
      }
      .taxi img {
        margin: 0 auto;
        width: 40%;
        height: auto;
      }
      .lang_curr_select {
        width: 80%;
        height: 45px;
        border: 1px solid #ffffff;
        border-radius: 4px;
        background: rgba(255, 255, 255, 0);
        margin-bottom: 15px;
      }
      .lang_curr_select select {
        position: relative;
        display: block;
        min-width: 100%;
        width: 100%;
        padding-right: 45px;
        padding-bottom: .25em;
        font-family: 'Lato', sans-serif;
        padding-top: .8em;
        /*padding-left: 6px;*/
        color: #ffffff;
        border: 0;
        background: transparent;
        outline: 0;
        -webkit-appearance: none;
        z-index: 1;
        cursor: pointer;
        line-height: 1.7;
        font-size: 13px;
      }
      #curr_lang {
        margin-top: 50px;
      }
      .lang_curr_select select option{
        color: #454545;
      }
      .lang_curr_select select:invalid { 
        color: #a89f9f; 
      }
      .curr_lang_btn {
        text-align: center;
      }
      #cur_lan_btn {
        background: none;
        color: #ffffff;
        font-weight: 600;
        width: 50%;
        height: 40px;
      }
      #cur_lan_btn:hover {
        background-color: #ffffff;
        color: #0971b6;
      }
      #back_home {
        position: absolute;
        top: 20px;
        left: 15px;
        z-index: 10;
        display: none;
      }
    </style>
    <script type="text/javascript">
      window.onload = function() {
        $("#loader").fadeOut("slow");

        var key_val = {
          "BH" : {"country":"BH","currency":"BHD","language":"AR"},
          "EG" : {"country":"EG","currency":"EGP","language":"AR"},
          "JO" : {"country":"JO","currency":"JOD","language":"AR"},
          "KW" : {"country":"KW","currency":"KWD","language":"AR"},
          "LB" : {"country":"LB","currency":"LBP","language":"AR"},
          "LY" : {"country":"LY","currency":"LYD","language":"AR"},
          "MA" : {"country":"MA","currency":"MAD","language":"AR"},
          "OM" : {"country":"OM","currency":"OMR","language":"AR"},
          "QA" : {"country":"QA","currency":"QAR","language":"AR"},
          "SA" : {"country":"SA","currency":"SAR","language":"AR"},
          "SY" : {"country":"SY","currency":"SYP","language":"AR"},
          "TN" : {"country":"TN","currency":"TND","language":"AR"},
          "AE" : {"country":"AE","currency":"AED","language":"AR"},
          "YE" : {"country":"YE","currency":"ZMW","language":"AR"},
          "IN" : {"country":"IN","currency":"INR","language":"EN"}
        }

        var country_code;
        var lang_code;
        var curr_code;

        function get_country_code() {
            $.getJSON("http://freegeoip.net/json/", function(data) {
                country_code = data.country_code;
                func_build();
            });
        }

        function func_build() {
          $.each(key_val, function(i, j) {
              if(key_val[i].country === country_code) {
                  // console.log(key_val[i].currency);
                curr_code = key_val[i].currency;
                lang_code = key_val[i].language;
                $('#curr_select option[value=' + curr_code + ']').attr("selected","selected");
                $('#lang_select option[value=' + lang_code + ']').attr("selected","selected");
              }
              else {
                $('#curr_select option[value="USD"]').attr("selected","selected");
                $('#lang_select option[value="EN"]').attr("selected","selected");
              }
          }); 
        }

        get_country_code();
      }
    </script>
  </head>
  <body>
    <div id="loader"></div>

    <div class="container-fluid">
      <div class="row navbar">
        <div id="back_home">
          <a href="http://192.168.1.102/awesomists/yazad/"><img src="back.png"></a>
        </div>
        <div class="col-md-12 appBar">
          <!-- <h2>Lap5</h2> -->
          <img class="img-responsive" src="Lap5_Final_logo_main_web_2.png">
        </div>
      </div>
    </div>
    <div>
      <div class="row">
        <div class="col-md-12 taxi">
          <img class="img-responsive" src="rentacar.svg">
        </div>
      </div>
    </div>

    <div id="curr_lang">
      <div class="container-fluid lang_curr_select">
        <div class="row">
          <div class="col-md-12">
            <form>
              <select required id="lang_select">
                  <option value="" disabled selected>Select Language..</option>
                  <option value="AR">Arabic</option>
                  <option value="EN-US">American English</option>
                  <option value="EN">English</option>
                  <option value="ZH-TW">Traditional Chinese</option>
                  <option value="ZH-HK">Chinese (Hong Kong)</option>
                  <option value="BR">Portuguese (Brazil)</option>
                  <option value="PT">Portuguese</option>
                  <option value="MX">Spanish (Mexico)</option>
                  <option value="ES">Spanish</option>
                  <option value="LV">Latvian</option>
                  <option value="LT">Lithuanian</option>
                  <option value="TH">Thai</option>
                  <option value="HR">Croatian</option>
                  <option value="ZH">Simplified Chinese</option>
                  <option value="RO">Romanian</option>
                  <option value="TL">Filipino</option>
                  <option value="CA">Catalan</option>
                  <option value="VI">Vietnamese</option>
                  <option value="TR">Turkish</option>
                  <option value="NO">Norwegian</option>
                  <option value="HU">Hungarian</option>
                  <option value="BG">Bulgarian</option>
                  <option value="FR">French</option>
                  <option value="SV">Swedish</option>
                  <option value="MK">Macedonian </option>
                  <option value="FO">Faroese</option>
                  <option value="ID">Indonesian</option>
                  <option value="DE">German</option>
                  <option value="FL">Flemish</option>
                  <option value="FI">Finnish</option>
                  <option value="KO">Korean</option>
                  <option value="CS">Czech</option>
                  <option value="IS">Icelandic</option>
                  <option value="UK">Ukrainian</option>
                  <option value="DA">Danish</option>
                  <option value="IT">Italian</option>
                  <option value="SR">Serbian</option>
                  <option value="MS">Malay</option>
                  <option value="PL">Polish</option>
                  <option value="CH">Swiss</option>
                  <option value="RU">Russian</option>
                  <option value="ET">Estonian</option>
                  <option value="NL">Dutch</option>
                  <option value="JA">Japanese</option>
                  <option value="EL">Greek</option>
              </select>
            </form>
          </div>
        </div>
      </div>
      <div class="container-fluid lang_curr_select">
        <div class="row">
          <div class="col-md-12">
            <form>
              <select required id="curr_select">
                  <option value="" disabled selected>Select Currency..</option>
                  <option value="AED">AED [AED]</option>
                  <option value="BHD">BHD [BHD]</option>
                  <option value="EGP">EGP [EGP]</option>
                  <option value="JOD">JOD [JOD]</option>
                  <option value="KWD">KWD [KWD]</option>
                  <option value="LBP">LBP [LBP]</option>
                  <option value="OMR">OMR [﷼]</option>
                  <option value="SAR">SAR [﷼]</option>
                  <option value="QAR">QAR [﷼]</option>
                  <option value="EUR">EUR [€]</option>
                  <option value="GBP">GBP [£]</option>
                  <option value="USD">USD [$]</option>
                  <option value="ARS">ARS [$]</option>
                  <option value="BDT">BDT [Tk]</option>
                  <option value="BGN">BGN [Лв]</option>
                  <option value="BRL">BRL [R$]</option>
                  <option value="CAD">CAD [$]</option>
                  <option value="CHF">CHF [CHF]</option>
                  <option value="CLP">CLP [$]</option>
                  <option value="CNY">CNY [¥]</option>
                  <option value="CRC">CRC [₡]</option>
                  <option value="CZK">CZK [Kč]</option>
                  <option value="DKK">DKK [kr]</option>
                  <option value="FJD">FJD [$]</option>
                  <option value="AUD">AUD [$]</option>
                  <option value="GTQ">GTQ [Q]</option>
                  <option value="HKD">HKD [HK$]</option>
                  <option value="HUF">HUF [Ft]</option>
                  <option value="IDR">IDR [Rp]</option>
                  <option value="ILS">ILS [₪]</option>
                  <option value="INR">INR [₨]</option>
                  <option value="ISK">ISK [kr]</option>
                  <option value="JPY">JPY [¥]</option>
                  <option value="KES">KES [KSh]</option>
                  <option value="KRW">KRW [₩]</option>
                  <option value="LKR">LKR [₨]</option>
                  <option value="MKD">MKD [ден]</option>
                  <option value="MMK">MMK [K]</option>
                  <option value="MOP">MOP [MOP$]</option>
                  <option value="MXN">MXN [$]</option>
                  <option value="MYR">MYR [RM]</option>
                  <option value="NAD">NAD [$]</option>
                  <option value="NGN">NGN [₦]</option>
                  <option value="NOK">NOK [kr]</option>
                  <option value="NZD">NZD [$]</option>
                  <option value="PHP">PHP [₱]</option>
                  <option value="PKR">PKR [₨]</option>
                  <option value="PLN">PLN [zł]</option>
                  <option value="RON">RON [Lei]</option>
                  <option value="RSD">RSD [PCД]</option>
                  <option value="RUB">RUB [₽]</option>
                  <option value="SEK">SEK [kr]</option>
                  <option value="SGD">SGD [$]</option>
                  <option value="THB">THB [฿]</option>
                  <option value="TRY">TRY [₺]</option>
                  <option value="TWD">TWD [NT$]</option>
                  <option value="TZS">TZS [TZS]</option>
                  <option value="UAH">UAH [₴]</option>
                  <option value="AZN">AZN [ман]</option>
                  <option value="VND">VND [₫]</option>
                  <option value="ZAR">ZAR [R]</option>
              </select>
            </form>
          </div>
        </div>
      </div>
      <div>
        <div class="container-fluid curr_lang_btn">
          <div class="row">
            <div class="col-md-12">
              <button type="button" id="cur_lan_btn" class="btn btn-default">GO</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="abe_ABE">
      <!-- <div id="loader">Loading the search</div> -->
      <!--  Temporary Css -->
      <style type="text/css">

       /* #ct_s1_search_button {
            background: rgba(11, 98, 81, 0);
            border-color: #FFFFFF;
        }
        #ct_booking_summary_form #ct_s2_search_button {
            background: #0971b6;
        }
        #ct_booking_summary_form #ct_s3_search_button {
            background: #0971b6;
        }
        #ct_box_DriversDetails .ct-form-field .ct-input {
            height: 45px;
            border-radius: 10px;
            border: 1px solid #0971b6;
            background: rgb(11, 98, 81,0);
            color: #0971b6;
        }
        #ct_box_DriversDetails .ct-form-field .ct-palette-d-color-darken {
            color: #0971b6;
        }*/
        #ui-datepicker-div {
          left: 0px !important;
        }
      </style>
      <noscript>YOUR BROWSER DOES NOT SUPPORT JAVASCRIPT</noscript>
    </div>

    <script type="text/javascript">
      
          var currency;
          var language;

          $("#cur_lan_btn").click(function() {
            var lang = document.getElementById("lang_select");
            var language = lang.options[lang.selectedIndex].value;
            var curr = document.getElementById("curr_select");
            var currency = curr.options[curr.selectedIndex].value;
            console.log(language);
            console.log(currency);
            main_func(language, currency);
          });

          var CT = {
            ABE: {
              Settings: {
                  events: [
                  {
                    ready: function() {
                      console.log("Getting ready");
                      $("#curr_lang").css("display", "none");

                    }
                  },
                  {
                    step1: function(e, obj, $) {
                      console.log("I am in step 1");
                      switch (obj.process) {
                        case 'start':
                               console.log("Start");
                                break;
                        case 'prerender':
                                console.log("prerender");
                                break;
                        case 'render':
                                console.log("render");
                                break;
                        case 'postrender':
                                console.log("postrender");
                                break;
                        case 'success':
                                console.log("success");
                                break;
                      }
                        // var myElement = document.querySelector("#loader");
                        // myElement.style.display = "none";
                    }
                  },
                  {
                    step2: function(e, obj, $) {
                      console.log("I am in step 2");
                      switch (obj.process) {
                        case 'start':
                            // Do something...
                            break;
                        case 'startavail':
                            // Do something...
                            break;
                        case 'render':
                            $('.taxi').css("display","none");
                            $('.appBar h2').css({'font-size':'40px'});
                            $('.appBar').css({'height':'0px'});
                            $('.navbar').css({'top':'0px',
                                              'position':'fixed',
                                              '-webkit-box-shadow':'0px 1px 5px 0px rgba(0,0,0,0.75)',
                                              '-moz-box-shadow':'0px 1px 5px 0px rgba(0,0,0,0.75)',
                                              'box-shadow':'0px 1px 5px 0px rgba(0,0,0,0.75)'});
                            $('#back_home').css({'display':'block'});
                            $('#abe_ABE').css({'margin-top':'75px'});
                            break;
                        case 'success':
                            // Do something...
                            break;
                        case 'progressbar':
                            // Do something...
                            break;
                        case 'nocar':
                            // Do something...
                            break;
                      }  
                    }
                  }
                ],
                proxyURL: 'otaproxy.php',
                clientID: '675803',
                // templateLayout: {
                //   breadcrumbs: true,
                //   // css: 'theme.css'
                // },
                customStyles: [
                  {
                    style_name: "myStyle.css",
                    style_path: "./css/",
                  } 
                ],
                // currency: currency,
                // language: language,
                // residenceID: 'IE',
                theme:  {
                  primary: '#0971b6', // e.g #0000FF
                  secondary: '#0971b6', // e.g #FF0000
                  complimentary: '#0971b6' // e.g #000000 #0b6251
                }
              }
            }
          };
   
          function main_func(language, currency) {
            CT.ABE.Settings.version = '4.0';
            CT.ABE.Settings.currency = currency;
            CT.ABE.Settings.language = language;

            var cts = document.createElement('script'); cts.type = 'text/javascript'; cts.async = true;
            cts.src = '//ajaxgeo.cartrawler.com/abe' + CT.ABE.Settings.version + '/ct_loader.js?' + new Date().getTime();
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(cts, s);
          }
 
          // main_func();
    </script>
  </body>
</html>